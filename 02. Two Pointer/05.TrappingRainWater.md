# [42. Trapping Rain Water](https://leetcode.com/problems/trapping-rain-water/)
Hard


Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it can trap after raining.

 

Example 1:
```
Input: height = [0,1,0,2,1,0,1,3,2,1,2,1]
Output: 6
Explanation: The above elevation map (black section) is represented by array [0,1,0,2,1,0,1,3,2,1,2,1]. 
In this case, 6 units of rain water (blue section) are being trapped.
```
Example 2:
```
Input: height = [4,2,0,3,2,5]
Output: 9
 ```

Constraints:

- n == height.length
- 1 <= n <= 2 * 10<sup>4</sup>
- 0 <= height[i] <= 10<sup>5</sup>

## Approach
### OPTIMAL Approach:
```
ğŸŒ§ï¸ Trapping Rain Water - OPTIMAL APPROACH
ğŸ§  Intuition
We can trap water at position i only if:

Thereâ€™s a higher bar on the left

And a higher bar on the right

The amount of water trapped at index i:

water[i] = min(leftMax, rightMax) - height[i]
If either side is lower, no water is trapped.

If both sides are taller, the water is equal to the difference between the shorter boundary and current height.

ğŸ” Dry Run Example
Input:
height = [0,1,0,2,1,0,1,3,2,1,2,1]

ğŸ“Š Step-by-Step Dry Run (Visual Format)
Index (i)	Height	Left Max	Right Max	Water at i
0	          0	        0	        3	        0
1	          1	        1	        3	        0
2	          0	        1	        3	        1 âœ…
3	          2	        2	        3	        0
4	          1	        2	        3	        1 âœ…
5	          0	        2	        3	        2 âœ…
6	          1	        2	        3	        1 âœ…
7	          3	        3	        3	        0
8	          2	        3	        2	        0
9	          1	        3	        2	        1 âœ…
10	          2	        3	        2	        0
11	          1	        3	        1	        0
ğŸ’§ Total Water Trapped = 6 units

ğŸ–¼ï¸ Visual Reference:
```

<img width="661" height="505" alt="image" src="https://github.com/user-attachments/assets/57788fcd-026b-463a-94a0-8a98ee7d5533" />

```
In the diagram:

Gray bars represent elevation.
Blue blocks represent trapped rainwater.
Each barâ€™s water is limited by the minimum of the tallest bars on its left and right.
ğŸš€ Approach â€“ Two Pointer Technique
We use:

Two pointers: left at start, right at end.
Two variables: leftMax, rightMax to track tallest bars on both ends.
ğŸ”‘ Why Two Pointers?
At every step:

If height[left] < height[right], then the water at left depends on leftMax.
Else, the water at right depends on rightMax.
We move the smaller side inward, since it's the limiting factor.
```
## Solution
```java
class Solution {
    public int trap(int[] height) {
        int l=0, r=height.length-1;
        int leftMax=0, rightMax=0;
        int trappedWater=0;

        while(l<r){
            leftMax = Math.max(leftMax,height[l]);
            rightMax = Math.max(rightMax,height[r]);

            if(leftMax<rightMax){
                trappedWater += (leftMax-height[l]);
                l++;
            }
            else{
                trappedWater += (rightMax-height[r]);
                r--;
            }
        }
        return trappedWater;
    }
}

```
## Complexity Analysis
```
- Time Complexity: O(N) -> go through each elements of the height array
- Space Complexity: O(1)
```
