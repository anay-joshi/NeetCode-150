# 238. Product of Array Except Self
Medium


Given an integer array nums, return an array answer such that answer[i] is equal to the product of all the elements of nums except nums[i].

The product of any prefix or suffix of nums is guaranteed to fit in a 32-bit integer.

You must write an algorithm that runs in O(n) time and without using the division operation.

 

Example 1:
```
Input: nums = [1,2,3,4]
Output: [24,12,8,6]
```
Example 2:
```
Input: nums = [-1,1,0,-3,3]
Output: [0,0,9,0,0]
 ```

Constraints:

- 2 <= nums.length <= 105
- -30 <= nums[i] <= 30
- The product of any prefix or suffix of nums is guaranteed to fit in a 32-bit integer.


```
 PRODUCT OF ARRAY EXCEPT SELF — CONCISE REVISION NOTES

CORE IDEA
• For each index i:
  result[i] = (product of elements to the left of i)
            × (product of elements to the right of i)
• Avoid division.
• Use two passes with running products.

APPROACH
1) Prefix pass (left → right)
   - prefix = product of all elements before index i
   - store prefix directly in result[i]

2) Suffix pass (right → left)
   - suffix = product of all elements after index i
   - multiply result[i] with suffix

WHY IT WORKS
• Every element nums[i] is excluded because:
  - prefix stops before i
  - suffix starts after i

DRY LOGIC FLOW
nums:   [a, b, c, d]

After prefix pass:
result = [1, a, a·b, a·b·c]

After suffix pass:
result = [(b·c·d), (a·c·d), (a·b·d), (a·b·c)]

EDGE CASES
• One zero → only zero’s index has non-zero product
• Two or more zeros → all results are 0
• Works with negatives

COMPLEXITY
• Time: O(n)
• Space: O(1) extra (output array not counted)

INTERVIEW ONE-LINER
“Store left products in result, then multiply right products in reverse.”

CODE PATTERN TO REMEMBER
for i = 0 → n-1:
    result[i] = prefix
    prefix *= nums[i]

for i = n-1 → 0:
    result[i] *= suffix
    suffix *= nums[i]
```


### Follow up: Can you solve the problem in O(1) extra space complexity? (The output array does not count as extra space for space complexity analysis.)

```java
class Solution {
    public int[] productExceptSelf(int[] nums) {
        int[] result = new int[nums.length];
        int prefix=1;
        int suffix=1;
        for(int i=0; i<nums.length; i++){
            result[i]=prefix;
            prefix*=nums[i];
        }
        for(int i=nums.length-1; i>=0; i--){
            result[i]*=suffix;
            suffix*=nums[i];
        }

        return result;
    }
}
```
